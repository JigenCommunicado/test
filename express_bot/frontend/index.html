<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Express SmartApp - –ù–∞–≤–∏–≥–∞—Ü–∏—è</title>
    <style>
        :root {
            --bg-color: #f5f5f5;
            --card-bg: white;
            --text-color: #333;
            --text-secondary: #666;
            --border-color: #e9ecef;
            --hover-color: #4facfe;
            --success-bg: #d4edda;
            --success-color: #155724;
            --info-bg: #d1ecf1;
            --info-color: #0c5460;
            --header-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --header-text: white;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: #404040;
            --hover-color: #6bb6ff;
            --success-bg: #1e4d2b;
            --success-color: #a8d5ba;
            --info-bg: #1a3a4a;
            --info-color: #a8d5e2;
            --header-bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --header-text: #e0e0e0;
        }

        body { 
            font-family: Arial, sans-serif; 
            margin: 40px; 
            background: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }
        
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: var(--card-bg); 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        h1 { 
            color: var(--text-color); 
            text-align: center; 
            margin-bottom: 30px;
            transition: color 0.3s ease;
        }
        
        .nav-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 20px; 
            margin: 20px 0; 
        }
        
        .nav-card { 
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center; 
            border: 2px solid var(--border-color); 
            transition: all 0.3s ease;
        }
        
        .nav-card:hover { 
            border-color: var(--hover-color); 
            transform: translateY(-2px); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
        }
        
        .nav-card h3 { 
            color: var(--text-color); 
            margin-bottom: 15px;
            transition: color 0.3s ease;
        }
        
        .nav-card p { 
            color: var(--text-secondary); 
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }
        
        .btn { 
            display: inline-block; 
            padding: 12px 24px; 
            background: var(--hover-color); 
            color: white; 
            text-decoration: none; 
            border-radius: 8px; 
            font-weight: 500; 
            transition: all 0.3s ease; 
        }
        
        .btn:hover { 
            background: var(--hover-color); 
            transform: translateY(-1px); 
            filter: brightness(0.9);
        }
        
        .status { 
            padding: 10px; 
            border-radius: 5px; 
            margin: 10px 0; 
            text-align: center; 
        }
        
        .status.success { 
            background: var(--success-bg); 
            color: var(--success-color); 
        }
        
        .status.info { 
            background: var(--info-bg); 
            color: var(--info-color); 
        }

        .header {
            background: var(--header-bg);
            color: var(--header-text);
            padding: 30px;
            text-align: center;
            position: relative;
            border-radius: 10px 10px 0 0;
            margin: -30px -30px 30px -30px;
        }

        .theme-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .theme-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--header-text);
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
        }

        .theme-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .theme-btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .version-selector {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .version-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--header-text);
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
        }

        .version-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .version-btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .mobile-only {
            display: none;
        }

        .desktop-only {
            display: block;
        }

        @media (max-width: 768px) {
            .mobile-only {
                display: block;
            }
            .desktop-only {
                display: none;
            }
            .version-selector {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }
            .theme-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="version-selector">
                <button class="version-btn active" onclick="switchVersion('desktop')" id="desktopBtn">
                    üñ•Ô∏è –ü–ö
                </button>
                <button class="version-btn" onclick="switchVersion('mobile')" id="mobileBtn">
                    üì± –ú–æ–±–∏–ª—å–Ω–∞—è
                </button>
            </div>
            
            <h1>üöÄ Express SmartApp - –ù–∞–≤–∏–≥–∞—Ü–∏—è</h1>
            
            <div class="theme-switcher">
                <button class="theme-btn active" onclick="switchTheme('light')" id="lightBtn">
                    ‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è
                </button>
                <button class="theme-btn" onclick="switchTheme('dark')" id="darkBtn">
                    üåô –¢–µ–º–Ω–∞—è
                </button>
            </div>
        </div>
        
        <div class="status success">
            ‚úÖ –í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ!<br>
            <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∏–∂–µ –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.
        </div>
        
        <div class="nav-grid">
                            <div class="nav-card">
                    <h3>üß™ –ü—Ä–æ—Å—Ç–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h3>
                    <p>–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å CORS –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    <a href="simple_test_page.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
                </div>
                
                <div class="nav-card">
                    <h3>üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</h3>
                    <p>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∑–∞—è–≤–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –û–ö–≠, –¥–∞—Ç–µ, –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –∏ —Ç–µ–∫—Å—Ç—É</p>
                    <a href="search_interface.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫</a>
                </div>
                
                <div class="nav-card">
                    <h3>üë• –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞</p>
                    <a href="admin_panel.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å</a>
                </div>
                
                <div class="nav-card mobile-only">
                    <h3>üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</h3>
                    <p>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ Express</p>
                    <a href="mobile_interface.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å –º–æ–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é</a>
                </div>
                
                <div class="nav-card">
                    <h3>‚úàÔ∏è –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–µ–π—Å</h3>
                    <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–π—Å—ã</p>
                    <a href="flight_booking_ui.html" class="btn">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</a>
                </div>
                
                <div class="nav-card">
                    <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <p>–°–∏—Å—Ç–µ–º–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø—Ä–∏–µ–º–∞ –∑–∞—è–≤–æ–∫</p>
                    <a href="notifications.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</a>
                </div>
            
            <div class="nav-card">
                <h3>üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h3>
                <p>–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π SmartApp</p>
                <a href="enhanced_test_page.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a>
            </div>
            
            <div class="nav-card">
                <h3>üì± –û—Å–Ω–æ–≤–Ω–æ–π SmartApp</h3>
                <p>–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ä–µ–π—Å—ã</p>
                <a href="http://localhost:5002" class="btn" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π SmartApp</a>
            </div>
            
            <div class="nav-card">
                <h3>üîß –¢–µ—Å—Ç–æ–≤—ã–π SmartApp</h3>
                <p>–¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å API –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                <a href="http://localhost:8081" class="btn" target="_blank">–û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π SmartApp</a>
            </div>
            
            <div class="nav-card">
                <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h3>
                <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</p>
                <a href="test_smartapp_standalone.html" class="btn">–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</a>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üîó –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ API</h3>
            <p><strong>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API (–±–µ–∑ CORS –ø—Ä–æ–±–ª–µ–º):</strong></p>
            <ul>
                <li><a href="http://localhost:8081/api/health" target="_blank">Health Check (—Ç–µ—Å—Ç–æ–≤—ã–π)</a></li>
                <li><a href="http://localhost:8081/api/statistics" target="_blank">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç–µ—Å—Ç–æ–≤—ã–π)</a></li>
                <li><a href="http://localhost:5002/health" target="_blank">Health Check (–æ—Å–Ω–æ–≤–Ω–æ–π)</a></li>
                <li><a href="http://localhost:5002/api/statistics" target="_blank">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π)</a></li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>üñ•Ô∏è –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h3>
            <p><strong>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong></p>
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto;">
cd /root/test/express_bot
source venv/bin/activate

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
python3 quick_test.py

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç
python3 comprehensive_test.py

# –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ SmartApp
python3 test_main_smartapp.py
            </pre>
        </div>
        
        <div class="status info">
            <strong>–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤:</strong><br>
            ‚Ä¢ –û—Å–Ω–æ–≤–Ω–æ–π SmartApp: http://localhost:5002 ‚úÖ<br>
            ‚Ä¢ –¢–µ—Å—Ç–æ–≤—ã–π SmartApp: http://localhost:8081 ‚úÖ<br>
            ‚Ä¢ HTTP —Å–µ—Ä–≤–µ—Ä: http://localhost:8080 ‚úÖ
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –∏ –≤–µ—Ä—Å–∏–∏
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            const savedTheme = localStorage.getItem('theme') || 'light';
            const savedVersion = localStorage.getItem('version') || 'desktop';
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            switchTheme(savedTheme);
            switchVersion(savedVersion);
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function switchTheme(theme) {
            const body = document.body;
            const lightBtn = document.getElementById('lightBtn');
            const darkBtn = document.getElementById('darkBtn');
            
            if (theme === 'dark') {
                body.setAttribute('data-theme', 'dark');
                lightBtn.classList.remove('active');
                darkBtn.classList.add('active');
            } else {
                body.removeAttribute('data-theme');
                lightBtn.classList.add('active');
                darkBtn.classList.remove('active');
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É
            localStorage.setItem('theme', theme);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
        function switchVersion(version) {
            const desktopBtn = document.getElementById('desktopBtn');
            const mobileBtn = document.getElementById('mobileBtn');
            const mobileCards = document.querySelectorAll('.mobile-only');
            const desktopCards = document.querySelectorAll('.desktop-only');
            
            if (version === 'mobile') {
                desktopBtn.classList.remove('active');
                mobileBtn.classList.add('active');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
                mobileCards.forEach(card => {
                    card.style.display = 'block';
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
                desktopCards.forEach(card => {
                    card.style.display = 'none';
                });
                
                // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
                setTimeout(() => {
                    window.location.href = 'mobile_interface.html';
                }, 500);
            } else {
                desktopBtn.classList.add('active');
                mobileBtn.classList.remove('active');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏
                mobileCards.forEach(card => {
                    card.style.display = 'block';
                });
                
                desktopCards.forEach(card => {
                    card.style.display = 'block';
                });
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É
            localStorage.setItem('version', version);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        function detectDevice() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isSmallScreen = window.innerWidth <= 768;
            
            if (isMobile || isSmallScreen) {
                switchVersion('mobile');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', detectDevice);
        window.addEventListener('resize', function() {
            if (window.innerWidth <= 768) {
                switchVersion('mobile');
            } else if (window.innerWidth > 768) {
                switchVersion('desktop');
            }
        });
    </script>
</body>
</html>
