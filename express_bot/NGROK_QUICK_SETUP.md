# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok –¥–ª—è Express Bot

## üìã –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Cloudflare:
```bash
pkill cloudflared
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ unzip –∏ ngrok:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ unzip
apt update && apt install -y unzip

# –°–∫–∞—á–∞–π—Ç–µ ngrok
wget -O /tmp/ngrok.zip https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.zip

# –†–∞—Å–ø–∞–∫—É–π—Ç–µ ngrok
unzip /tmp/ngrok.zip -d /usr/local/bin/

# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x /usr/local/bin/ngrok
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:
```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
ngrok http 5010
```

### 4. –ü–æ–ª—É—á–∏—Ç–µ URL —Ç—É–Ω–Ω–µ–ª—è:
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
Session Status                online
Web Interface                 http://127.0.0.1:4040
Forwarding                    https://abc123.ngrok.io -> http://localhost:5010
```

**–í–∞—à URL**: `https://abc123.ngrok.io`

### 5. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config.json
nano /root/test/express_bot/config.json

# –ó–∞–º–µ–Ω–∏—Ç–µ webhook_url –Ω–∞:
"webhook_url": "https://abc123.ngrok.io/webhook"
```

### 6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Express.ms:
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å Express.ms
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "SmartApps"
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: Flight Booking Bot
   - **URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: `https://abc123.ngrok.io`
   - **Webhook URL**: `https://abc123.ngrok.io/webhook`
   - **–ò–∫–æ–Ω–∫–∞**: ‚úàÔ∏è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# Health check
curl https://abc123.ngrok.io/health

# Webhook test
curl -X POST https://abc123.ngrok.io/webhook \
  -H "Content-Type: application/json" \
  -d '{"type": "message", "user_id": "test", "text": "/start"}'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: `https://abc123.ngrok.io/admin`
- **ngrok –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://localhost:4040
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: `https://abc123.ngrok.io/api/stats`

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å
pkill ngrok

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å
ngrok http 5010

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://localhost:4040/api/tunnels
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ngrok:
- üîí **–°—Ç–∞–±–∏–ª—å–Ω—ã–π** - –Ω–∞–º–Ω–æ–≥–æ –Ω–∞–¥–µ–∂–Ω–µ–µ Cloudflare
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
- üìä **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ http://localhost:4040
- üîß **–ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ª–µ–≥–∫–æ –∑–∞–ø—É—Å–∫–∞—Ç—å/–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
- üåê **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π URL** - –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ (—Å –∞–∫–∫–∞—É–Ω—Ç–æ–º)

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω:
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–æ–Ω–ª–∞–π–Ω" –≤ Express.ms
- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É `/start`
- –ü–æ–∑–≤–æ–ª—è—Ç—å –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–π—Å—ã
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏


