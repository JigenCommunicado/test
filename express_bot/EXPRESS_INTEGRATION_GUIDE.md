# üöÄ Express SmartApp - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìã –û–±–∑–æ—Ä

Express SmartApp - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ–π—Å—ã, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º Express.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Flight Booking SmartApp
- **–í–µ—Ä—Å–∏—è:** 1.0.0
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ä–µ–π—Å—ã
- **–ò–∫–æ–Ω–∫–∞:** ‚úàÔ∏è
- **–¶–≤–µ—Ç:** #0088cc

### **–ü–æ—Ä—Ç—ã:**
- **SmartApp:** 5004
- **API:** 5002 (–æ—Å–Ω–æ–≤–Ω–æ–π Flask API)
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä:** 8080

## üöÄ –ó–∞–ø—É—Å–∫

### **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫:**
```bash
cd /root/test/express_bot
./start_express_smartapp.sh
```

### **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
./stop_express_smartapp.sh
```

## üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å SmartApp

### **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:**
- üìù **–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–π—Å
- üìã **–ú–æ–∏ –∑–∞—è–≤–∫–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üìÖ **–ü–µ—Ä–∏–æ–¥—ã –ø–æ–¥–∞—á–∏** - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞—è–≤–∫–∞–º

### **–§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏:**
- **–õ–æ–∫–∞—Ü–∏—è** - –≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ (–ú–æ—Å–∫–≤–∞, –°–ü–±, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, etc.)
- **–û–ö–≠** - –≤—ã–±–æ—Ä –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
- **–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞** - –ø–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–∞—Ç–∞
- **–î–æ–ª–∂–Ω–æ—Å—Ç—å** - –ë–ü, –†–ü, –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç, etc.
- **–§–ò–û** - –ø–æ–ª–Ω–æ–µ –∏–º—è
- **–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä** - –Ω–æ–º–µ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –≥–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- **–ü–æ–∂–µ–ª–∞–Ω–∏—è** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

## üîó API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ SmartApp:**
```
GET /api/smartapp/info
```

### **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:**
```
GET /api/smartapp/menu
```

### **–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏:**
```
GET /api/smartapp/form
```

### **–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏:**
```
POST /api/smartapp/submit
Content-Type: application/json

{
  "form_data": {
    "location": "–ú–æ—Å–∫–≤–∞",
    "oke": "–û–ö–≠ 1",
    "date": "2025-09-20",
    "position": "–ë–ü",
    "fio": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "tab_num": "123456",
    "direction": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
    "wishes": "–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è"
  },
  "user_info": {
    "id": "user123",
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
  }
}
```

### **–ó–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
GET /api/smartapp/applications/{user_id}
```

### **–ü–µ—Ä–∏–æ–¥—ã –ø–æ–¥–∞—á–∏:**
```
GET /api/smartapp/periods
```

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
GET /api/smartapp/statistics
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Express –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º

### **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Express:**

–°–æ–≥–ª–∞—Å–Ω–æ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Express SmartApp](https://docs.express.ms/smartapps/), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å SmartApp –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Express:**
   - URL: `http://your-server:5004/smartapp`
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `Flight Booking SmartApp`
   - –ò–∫–æ–Ω–∫–∞: ‚úàÔ∏è
   - –¶–≤–µ—Ç: #0088cc

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è):**
   - URL: `http://your-server:5004/api/smartapp/`
   - –ú–µ—Ç–æ–¥—ã: POST, GET

### **2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Express —Å–µ—Ä–≤–µ—Ä–∞:**

```yaml
smartapps:
  - name: "Flight Booking SmartApp"
    url: "http://localhost:5004/smartapp"
    icon: "‚úàÔ∏è"
    color: "#0088cc"
    permissions:
      - "read_user_info"
      - "send_messages"
      - "access_files"
```

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

SmartApp –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Express –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:5004/health

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ SmartApp
curl http://localhost:5004/api/smartapp/info

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
curl http://localhost:5004/api/smartapp/menu

# –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏
curl http://localhost:5004/api/smartapp/form
```

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏:**
```bash
curl -X POST http://localhost:5004/api/smartapp/submit \
  -H "Content-Type: application/json" \
  -d '{
    "form_data": {
      "location": "–ú–æ—Å–∫–≤–∞",
      "oke": "–û–ö–≠ 1",
      "date": "2025-09-20",
      "position": "–ë–ü",
      "fio": "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á",
      "tab_num": "123456",
      "direction": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
      "wishes": "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞"
    },
    "user_info": {
      "id": "test_user",
      "name": "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á"
    }
  }'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–õ–æ–≥–∏:**
```bash
tail -f logs/express_smartapp.log
```

### **–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
```bash
ps aux | grep express_smartapp
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤:**
```bash
netstat -tlnp | grep 5004
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **HTTPS** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Express
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–µ–¥–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –ª–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

Express SmartApp –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º Express –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- ‚úÖ **–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
- ‚úÖ **API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å Express –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–º
- ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

**SmartApp –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ Express!** üöÄ







